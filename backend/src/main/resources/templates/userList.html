<!DOCTYPE html>
<html xmlns:th="www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layoutReal}">
      <head>
        <!-- Í∞úÎ≥Ñ ÌéòÏù¥ÏßÄ Ï†ÑÏö© CSS ÌååÏùº -->
        <link rel="stylesheet" th:href="@{/css/user-list.css}">
    </head>
<body>
<div layout:fragment="content" class="content">
    <section>
        <div class="tab-menu">
            <a href="userList" class="active">ÌöåÏõê Ï°∞Ìöå</a>
            <a href="sales">Îß§Ï∂ú Ï°∞Ìöå</a>
            <a href="game">Í≤ΩÍ∏∞ Ï°∞Ìöå</a>
        </div>

        <div class="container">
            <div class="table-header">
                <div class="left-section">
                    <form action="/admin/userList" method="get">
                        <div class="search-bar">
                            <span class="filter-icon">üîç</span>
                            <select name="searchCriteria" id="searchCriteria" class="search-criteria">
                                <option value="name">Ïù¥Î¶Ñ</option>
                                <option value="email">Ïù¥Î©îÏùº</option>
                                <option value="membership">Î©§Î≤ÑÏã≠</option>
                            </select>
                            <input name="keyword" type="text" id="keyword" placeholder="Search...">
                            <button type="submit" id="searchButton">Í≤ÄÏÉâ</button>
                        </div>
                    </form>
                    <!-- Ï¥ù ÌöåÏõê Ïàò ÌëúÏãú -->
                    <span class="allUsers">Ï¥ù ÌöåÏõê Ïàò : <b th:text="${totalUsers}"></b>Î™Ö</span>
                </div>
                <div>
                    <a href="createAdmin"><button class="add-button">+ Ïã†Í∑ú Í¥ÄÎ¶¨Ïûê</button></a>
                    <a th:href="@{/admin/deleteAdmin}"><button class="delete-button">Í¥ÄÎ¶¨Ïûê ÏÇ≠Ï†ú</button></a>
                </div>
            </div>

            <table class="table">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Ïù¥Î¶Ñ</th>
                    <th>Ïù¥Î©îÏùº</th>
                    <th>
                        <form action="/admin/userList" method="get">
                            <label for="membershipFilter">Î©§Î≤ÑÏã≠</label>
                            <select id="membershipFilter" name="membership" onchange="this.form.submit()">
                                <option value="">Î™®Îëê Î≥¥Í∏∞</option>
                                <option value="BRONZE">BRONZE</option>
                                <option value="SILVER">SILVER</option>
                                <option value="GOLD">GOLD</option>
                            </select>
                        </form>
                    </th>
                    <th>Ï∂©Ï†Ñ ÏûîÏï°</th>
                    <th>ÌöåÏõê ÏÉÅÌÉú</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="user : ${userPage}">
                    <td th:text="${user.userId}">1</td>
                    <td>
                        <a th:text="${user.userName}"
                           th:href="@{/admin/userDetail/{userId}(userId = ${user.userId})}">Î∞ïÏÑ†ÏïÑ</a>
                    </td>
                    <td th:text="${user.userEmail}">seon04520@gmail.com</td>
                    <td>
                        <span th:text="${user.userMembershipName != null ? user.userMembershipName : 'BRONZE'}">BRONZE</span>
                    </td>
                    <td>
                        <span th:each="payment : ${user.payments}">
                        <span th:with="amount=${payment.paymentAmount}"
                              th:text="${#numbers.formatInteger(amount, 0, 'COMMA') + 'Ïõê'}"></span>
                        </span>
                        <span th:if="${#lists.isEmpty(user.payments)}">0Ïõê</span>
                    </td>
                    <td>
                        <span th:if="${user.userStatus == T(com.team.MMSValleyBall.enums.UserStatus).ACTIVE}"
                              class="status ACTIVE" th:text="${user.userStatus}">ACTIVE
                        </span>
                        <span th:if="${user.userStatus == T(com.team.MMSValleyBall.enums.UserStatus).INACTIVE}"
                              class="status INACTIVE" th:text="${user.userStatus}">INACTIVE
                        </span>
                    </td>
                </tr>
                </tbody>
            </table>

            <div class="pagination">
                <div class="pages">
                <!-- Ïù¥Ï†Ñ ÌéòÏù¥ÏßÄ Î≤ÑÌäº -->
                <span th:if="${userPage != null}" th:classappend="${userPage.number <= 0} ? 'disabled'">
                    <a th:href="${userPage.number > 0} ? @{/admin/userList(page=${userPage.number - 1}, size=${userPage.size}, searchCriteria=${searchCriteria}, keyword=${keyword}, membership=${membership})} : '#'">
                        Ïù¥Ï†Ñ
                    </a>
                </span>

                <!-- ÌéòÏù¥ÏßÄ Î≤àÌò∏ ÎßÅÌÅ¨ -->
                <span th:if="${userPage != null}" th:each="pageNumber : ${pageBars}">
                    <a class="page-link"
                        th:classappend="${pageNumber == userPage.number} ? 'active'"
                        th:href="@{/admin/userList(page=${pageNumber}, size=${userPage.size}, searchCriteria=${searchCriteria}, keyword=${keyword}, membership=${membership})}"
                        th:text="${pageNumber + 1}">1</a>
                </span>

                <!-- Îã§Ïùå ÌéòÏù¥ÏßÄ Î≤ÑÌäº -->
                <span th:if="${userPage != null}"
                        th:classappend="${userPage.number + 1 == userPage.totalPages} ? 'disabled'">
                    <a th:href="${userPage.number + 1 < userPage.totalPages} ? @{/admin/userList(page=${userPage.number + 1}, size=${userPage.size}, searchCriteria=${searchCriteria}, keyword=${keyword}, membership=${membership})} : '#'">
                        Îã§Ïùå
                    </a>
                </span>
                </div>
            </div>
        </div>
    </section>
</div>

</body>
</html>